<div id="elefunds">
    <input type="hidden" id="elefunds_donation_cent" value="<?php echo $view['suggestedDonationAmountCent']; ?>" name="elefunds_donation_cent"/>
    <input type="hidden" id="<?php echo 'elefunds_suggested_round_up_cent'; ?>" name="<?php echo 'elefunds_suggested_round_up_cent'; ?>" value="<?php echo $view['suggestedDonationAmountCent'];?>"/>
    <div id="elefunds_top" style="width: <?php echo $view['shopWidth']; ?>px;">
        <img src="https://bbbf9fd0e36d5cb36b93-c1fc539e0df6af03ccc14b5020ab4161.ssl.cf1.rackcdn.com/light/elefunds_logo.png" id="elefunds_logo" class="tiptip" desc="<?php echo $view['elefundsDescription']; ?>" title="elefunds" />
        <span>
            <div id="elefunds_arrow">
                <input type="checkbox" id="elefunds_checkbox" name="elefunds_checkbox"/>
                <label for="elefunds_checkbox"><?php echo $view['slogan'];?></label>
                <span id="elefunds_arrow_end"></span>
            </div>
            <div id="elefunds_plus_minus">
                <a href="#" onclick="elefunds.decreaseDonation(); return false;" id="elefunds_decrease"><img src="https://bbbf9fd0e36d5cb36b93-c1fc539e0df6af03ccc14b5020ab4161.ssl.cf1.rackcdn.com/light/minus.png"></a> <a href="#" onclick="elefunds.increaseDonation(); return false;" id="elefunds_increase"><img src="https://bbbf9fd0e36d5cb36b93-c1fc539e0df6af03ccc14b5020ab4161.ssl.cf1.rackcdn.com/light/plus.png"></a>
            </div>
            <div id="elefunds_input_container">
                <span id="elefunds_currency"><?php echo $view['currency']; ?></span>
                <input type="text" id="elefunds_input" name="elefunds_round_up" onkeyup="elefunds.donationChange(this.value)" value="<?php echo $view['suggestedDonationAmount'];?>" />
            </div>
        </span>
    </div>
    
    <div id="elefunds_bottom" style="width: <?php echo $view['shopWidth']; ?>px;">
        <?php $numReceivers = count($view['receivers']); $i = 0; foreach ($view['receivers'] as $key => $receiver): ?>
        <input type="hidden" name="elefunds_receiver_name[]" value="<?php echo $receiver->getName(); ?>" />
        <div class="elefunds_receiver tiptip" desc="<?php echo $receiver->getDescription(); ?>" title="<?php echo $receiver->getName(); ?>">
            <input type="checkbox" id="<?php echo 'elefunds_receiver_' . $receiver->getId(); ?>" name="<?php echo 'elefunds_receiver[]'; ?>" value="<?php echo $receiver->getId(); ?>"/>
            <?php if(++$i !== $numReceivers)  : ?>
                <label for="<?php echo 'elefunds_receiver_' . $receiver->getId(); ?>" style="padding: 12px <?php echo $view['paddingRight']; ?> 8px <?php echo $view['paddingLeft']; ?>;"><img src="<?php echo $receiver->getImage('horizontal', 'medium'); ?>" /></label>
            <?php else : ?>
                <label for="<?php echo 'elefunds_receiver_' . $receiver->getId(); ?>" style="padding: 12px <?php echo $view['paddingRightLast']; ?> 8px <?php echo $view['paddingLeftLast']; ?>;"><img src="<?php echo $receiver->getImage('horizontal', 'medium'); ?>" /></label>
            <?php endif; ?>
        </div>
        <?php endforeach; ?>
    </div>

    <div id="elefunds_round_sum_container" class="elefunds_hidden" style="width: <?php echo $view['shopWidth']; ?>px;">
        <?php if ($view['offerDonationReceipt']): ?>
            <div id="elefunds_receipt">
                <input type="checkbox" name="elefunds_receipt_input" id="elefunds_receipt_input" /><label for="elefunds_receipt_input"><?php echo $view['receipt_slogan'];?></label>
            </div>
        <?php endif; ?>
        <strong><?php echo $view['roundedSumString']; ?></strong>
        <strong id="elefunds_round_sum"><?php echo $view['roundedSum'];?></strong>
        <strong><?php echo $view['currency']; ?></strong>
    </div>
</div>

<script type="text/javascript">
$('<img src="https://bbbf9fd0e36d5cb36b93-c1fc539e0df6af03ccc14b5020ab4161.ssl.cf1.rackcdn.com/light/arrow_on.png"/>');
$('<img src="https://bbbf9fd0e36d5cb36b93-c1fc539e0df6af03ccc14b5020ab4161.ssl.cf1.rackcdn.com/light/checkbox_on.png"/>');
$('<img src="https://bbbf9fd0e36d5cb36b93-c1fc539e0df6af03ccc14b5020ab4161.ssl.cf1.rackcdn.com/light/receiver_on_bg.png"/>');
$('<img src="https://bbbf9fd0e36d5cb36b93-c1fc539e0df6af03ccc14b5020ab4161.ssl.cf1.rackcdn.com/light/receipt_on.png"/>');

var elefunds = (function(parent, $) {
    
    var options = {
        roundSumContainer: $('#<?php echo $view["roundSumContainer"]; ?>'),
        roundSum: $('#<?php echo $view["roundSum"]; ?>'),
        decimal: '<?php echo $view["currencyDelimiter"]; ?>',
        decimalAlt: ',',
        total: <?php echo $view['total']; ?>
    };
    
    if(options.decimal === options.decimalAlt) {
        options.decimalAlt = '.';
    }
    
    if(parent.hasOwnProperty('init')) {
        parent.init(options);
    }
    
    return {
        options: options,
        
        decreaseDonation: function() {
            return parent.decreaseDonation();
        },
        
        increaseDonation: function() {
            return parent.increaseDonation();
        },
        
        donationChange: function(floatValue) {
            return parent.donationChange(floatValue);
        },
    }
    
}(elefunds || {}, jQuery));
</script>
